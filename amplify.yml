version: 1
frontend:
  phases:
    preBuild:
      commands:
        - npm ci
    build:
      commands:
        - echo "VITE_API_URL=${VITE_API_URL}"
        - echo "VITE_WS_URL=${VITE_WS_URL}"
        - echo "VITE_RUDDERSTACK_ENDPOINT=${VITE_RUDDERSTACK_ENDPOINT}"
        - echo "VITE_RUDDERSTACK_WRITE_KEY set = $([ -n \"$VITE_RUDDERSTACK_WRITE_KEY\" ] && echo 'yes' || echo 'no')"
        - npm run build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
